{{- $email := promptStringOnce . "email" "Email Address" "tosho.hirasawa@gmail.com" }}
{{- $fullname := promptStringOnce . "fullname" "Full name" "Tosho Hirasawa" }}
{{- $pubkey := "" }}
{{- if (eq .chezmoi.os "darwin") }}
{{- $pubkey = promptStringOnce . "pubkey" "SSH public key (ECDSA)" "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMeVKlGGUnP+Gqej/sD4UyRLHjcCrcx7O4Zgfepo1+gl" }}
{{- end }}
{{- $python_version := promptStringOnce . "python_version" "Python Version" "3.12.3" }}
{{- $todoist_token := promptStringOnce . "todoist_token" "Todoist Token" -}}
{{- $op_private_key_id := promptStringOnce . "op_private_key_id" "SSH Key id in 1Password" -}}

[data]
    email = {{ $email | quote }}
    fullname = {{ $fullname | quote }}
{{- if (eq .chezmoi.os "darwin") }}
    pubkey = {{ $pubkey | quote }}
{{- end }}
    python_version = {{ $python_version | quote }}
    todoist_token = {{ $todoist_token | quote }}
    op_private_key_id = {{ $op_private_key_id | quote }}

[edit]
    command = "code"
    args = "--wait"

{{ if (eq .chezmoi.os "darwin") -}}
[hooks.read-source-state.pre]
    command = ".local/share/chezmoi/home/.install-password-manager.sh"
{{- end }}